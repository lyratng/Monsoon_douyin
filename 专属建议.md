
1. 用户上传一张完整穿搭的图片，显示加载卡片（和个人风格报告页面相同的加载卡片，以及一样的图片轮播动效）“AI正在给你推荐配饰/穿搭技巧“
2. 调用图片识别大模型 （文档如下）模型用 Doubao-seed-1.5-flash
分析图片中现在的穿着包含哪些 json包括top under shoes accessories ( bag necklace hats glasses rings belt socks chains etc)  以及每一个的特征 【此处首先需要你设计一版json格式提供给我审阅】
始终认为衣服和裤子是主体 其他的所有部分包括鞋都当成可变的灵活的配饰 
3. 把刚刚图像识别大模型的输出json结果+其他我们设定好的文字表达部分拼合成prompt，交给文本生成大模型
【此处需要你现在和我来一起确定这个prompt】
这个prompt的大致结构就是 
    1. 先图片识别大模型的json格式传达信息 是用户穿的衣服；
    2. 有一个我写好的知识库 描述什么衣服/搭配会map到什么配饰/优化技巧上【这个需要留出来一个单独的文件 我往里面填充】
    3. 指令：请你根据用户的衣服去尽可能match知识库里的内容 然后map到配饰/优化技巧上 有过用户穿的无法完全对应知识库 那么灵活变通 保证最后配饰/技巧匹配穿搭的审美 总体要有品位
    4. 说明：用户穿搭去和知识库的自变量匹配时 优先匹配衣服的种类 其次颜色 再其次材质 再其次廓形/版型
    5. 输出格式，包括5个配饰单品建议，要详细到具体单品；再加上3个穿搭技巧。【此处需要你来帮我设计一版json输出格式我来审阅】
知识库里的东西形如下，举例如下，请给我留出文件我会不断丰富、填充
白衬衫浅蓝色牛仔裤 - 棕色系/米褐色系腰带 金扣
白衬衫深蓝色牛仔裤 - 黑色腰带银扣
白衬衫黑色牛仔裤 - （强调对比度） 黑色的有棱有角的凌厉的包 墨镜
根据牛仔裤的版型还可以有不同推荐 阔腿的配尖头鞋 喇叭裤厚底鞋 紧身裤可以长靴
4. 第三步之后串行：豆包生成优化后穿搭图片
【这个地方需要你和我讨论一下，在调用 Doubao-seedream-4.5 的api的时候，能否把用户上传的那一张ta的穿搭图作为一个输入给到图片生成大模型？如果可以，那么我们保持一致性，就在用户上传的图片基础上改，给ta戴上配饰+采取穿搭小技巧；如果不可以，请你评估并给出解决方案】
想要的效果：
    1. 把上一步文本生成模型输出的5个配饰+3个穿搭技巧作为输入交给 Doubao-seedream-4.5，和原图片作为共同输入，让用户穿上这些配饰并采取相应的穿搭技巧
    2. 将生成后的图片输出
5. 当第四步进行完毕之后，跳转到“穿搭优化报告”页面，在“穿搭优化报告”界面输出图片+配饰文字描述
其中，一上来先显示图片，两张图左右并列挨在一起显示，左边是用户上传的原图，右边是优化之后的图
然后图片下方把文本生成大模型的输出渲染出来，也就是文字描述出需要添加的配饰+搭配技巧
报告的格式和UI参照【个人风格报告】界面的设计
整体UI符合 @ui-design-style.md

api key再env文件里面已经有了 由于我用的全套豆包模型 所以api key可以共用

官方调用代码
```javascript
curl https://ark.cn-beijing.volces.com/api/v3/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer 01bcd0d4-10e3-4609-ab1e-2d6122e82df7" \
  -d '{
     "model": "doubao-seed-1-6-lite-251015",
     "max_completion_tokens": 65535,
     "messages": [
        {
            "content": [
                {
                    "image_url": {
                        "url": "https://ark-project.tos-cn-beijing.ivolces.com/images/view.jpeg"
                    },
                    "type": "image_url"
                },
                {
                    "text": "图片主要讲了什么?",
                    "type": "text"
                }
            ],
            "role": "user"
        }
    ],
     "reasoning_effort": "medium"
}'
```




图生图的在这里
```js
curl -X POST https://ark.cn-beijing.volces.com/api/v3/images/generations \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer 01bcd0d4-10e3-4609-ab1e-2d6122e82df7" \
  -d '{
    "model": "doubao-seedream-4-5-251128",
    "prompt": "生成狗狗趴在草地上的近景画面",
    "image": "https://ark-project.tos-cn-beijing.volces.com/doc_image/seedream4_imageToimage.png",
    "sequential_image_generation": "disabled",
    "response_format": "url",
    "size": "2K",
    "stream": false,
    "watermark": true
}'
```


Opus 4.5的回复也补充在这里 一些结构化内容

一、补充配饰类别之后总共的图像识别输出
```json
{
  "outfit_analysis": {
    "top": {
      "type": "白色衬衫",
      "color": "白色",
      "material": "棉质",
      "fit": "修身",
      "features": ["翻领", "长袖", "纽扣"]
    },
    "bottom": {
      "type": "牛仔裤",
      "color": "浅蓝色",
      "material": "牛仔布",
      "fit": "直筒",
      "features": ["高腰", "无破洞"]
    },
    "shoes": {
      "type": "运动鞋",
      "color": "白色",
      "style": "休闲",
      "detected": true
    },
    "accessories": {
      "bag": { "type": null, "color": null, "detected": false },
      "belt": { "type": null, "color": null, "detected": false },
      "necklace": { "type": null, "detected": false },
      "earrings": { "type": null, "detected": false },
      "bracelet": { "type": null, "detected": false },
      "watch": { "type": null, "detected": false },
      "ring": { "type": null, "detected": false },
      "hat": { "type": null, "detected": false },
      "glasses": { "type": null, "detected": false },
      "scarf": { "type": null, "detected": false },
      "tie": { "type": null, "detected": false },
      "socks": { "visible": false, "detected": false }
    }
  }
}


二、知识库格式建议
```
# 穿搭配饰知识库

## 衬衫 + 牛仔裤
白衬衫 + 浅蓝色牛仔裤 → 棕色系/米褐色系腰带（金扣），帆布托特包
白衬衫 + 深蓝色牛仔裤 → 黑色腰带（银扣），简约皮质斜挎包
白衬衫 + 黑色牛仔裤 → 强调对比度，黑色有棱角的凌厉包，墨镜

## 牛仔裤版型匹配鞋子
阔腿牛仔裤 → 尖头鞋、乐福鞋
喇叭牛仔裤 → 厚底鞋、粗跟短靴
紧身牛仔裤 → 长靴、踝靴、运动鞋

## 连衣裙
碎花连衣裙 → 草编包、珍珠耳环、凉鞋
黑色连衣裙 → 金色配饰、高跟鞋、clutch包

（你继续填充...）

三、完整prompt
Prompt 1：图片识别（给 Doubao-seed-1.6-lite）
```json
你是一个专业的穿搭分析师。请仔细分析这张穿搭照片，识别出用户当前穿着的所有服饰和配饰。

请严格按照以下JSON格式输出，不要输出任何其他内容：

{
  "outfit_analysis": {
    "top": {
      "type": "上衣类型（如：衬衫/T恤/毛衣/卫衣/西装外套等）",
      "color": "颜色",
      "material": "材质（如能识别）",
      "fit": "版型（如：修身/宽松/oversize等）",
      "features": ["特征1", "特征2"]
    },
    "bottom": {
      "type": "下装类型（如：牛仔裤/西裤/裙子/短裤等）",
      "color": "颜色",
      "material": "材质",
      "fit": "版型（如：直筒/阔腿/紧身/A字等）",
      "features": ["特征1", "特征2"]
    },
    "shoes": {
      "type": "鞋子类型",
      "color": "颜色",
      "style": "风格",
      "detected": true/false
    },
    "accessories": {
      "bag": { "type": "包的类型", "color": "颜色", "detected": true/false },
      "belt": { "type": "腰带类型", "color": "颜色", "detected": true/false },
      "necklace": { "type": "项链类型", "detected": true/false },
      "earrings": { "type": "耳环类型", "detected": true/false },
      "bracelet": { "type": "手链类型", "detected": true/false },
      "watch": { "type": "手表类型", "detected": true/false },
      "ring": { "type": "戒指类型", "detected": true/false },
      "hat": { "type": "帽子类型", "detected": true/false },
      "glasses": { "type": "眼镜类型", "detected": true/false },
      "scarf": { "type": "围巾类型", "detected": true/false }
    }
  }
}

注意：
1. 如果某个配饰未检测到，detected设为false，type设为null
2. 重点关注top和bottom的详细特征，这是搭配的主体
3. 尽可能准确描述颜色和材质
```

Prompt 2：配饰推荐（给文本生成模型）
```json
你是一位资深时尚造型师，擅长穿搭配饰搭配和细节优化。

## 用户当前穿搭
${JSON.stringify(outfitAnalysis, null, 2)}

## 搭配知识库
${knowledgeBase}

## 你的任务
根据用户当前的穿搭，推荐5个配饰单品和3个穿搭优化技巧。

## 匹配规则（按优先级）
1. 优先匹配衣服的种类（如：衬衫、T恤、西装等）
2. 其次匹配颜色
3. 再其次匹配材质
4. 最后考虑版型/廓形

## 要求
- 尽量从知识库中匹配推荐
- 如果知识库中没有完全对应的规则，请根据你的时尚专业知识灵活推荐
- 配饰推荐要具体到单品（如"棕色真皮腰带，金色方扣"而不是"腰带"）
- 穿搭技巧要实用可操作
- 保证整体搭配有品位、协调统一

## 输出格式（严格JSON）
{
  "accessories": [
    {
      "category": "配饰类别（如：腰带/包/项链/耳环/手表/眼镜等）",
      "recommendation": "具体推荐单品描述",
      "reason": "推荐理由（简短）"
    }
  ],
  "styling_tips": [
    {
      "tip": "具体操作技巧",
      "effect": "能达到的效果"
    }
  ]
}

只输出JSON，不要有其他文字。

```

Prompt 3：图片生成（给 Doubao-seedream-4.5 图生图）
```js
基于这张穿搭照片，为模特添加以下配饰和造型调整：

配饰：
${accessories.map(a => `- ${a.recommendation}`).join('\n')}

造型调整：
${stylingTips.map(t => `- ${t.tip}`).join('\n')}

要求：
- 保持原图人物姿态和背景不变
- 自然地添加配饰，不要突兀
- 整体风格协调统一
- 高质量时尚穿搭照片风格