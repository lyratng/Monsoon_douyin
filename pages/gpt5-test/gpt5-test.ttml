<!-- GPT-5 API æµ‹è¯•é¡µé¢ -->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="header">
    <view class="title">ğŸ§ª GPT-5 API æµ‹è¯•</view>
    <view class="subtitle">è¯Šæ–­GPT-5 APIå…¼å®¹æ€§å’Œæ€§èƒ½é—®é¢˜</view>
  </view>

  <!-- APIä¿¡æ¯æ˜¾ç¤º -->
  <view class="api-info">
    <view class="api-info-title">ğŸ“¡ å½“å‰APIé…ç½®</view>
    <view class="api-info-item">
      <text class="api-info-label">æ¨¡å‹:</text>
      <text class="api-info-value">openai/gpt-5</text>
    </view>
    <view class="api-info-item">
      <text class="api-info-label">API Key:</text>
      <text class="api-info-value">{{apiKey}}</text>
    </view>
    <view class="api-info-item">
      <text class="api-info-label">Provider:</text>
      <text class="api-info-value">OpenRouter</text>
    </view>
  </view>

  <!-- æ§åˆ¶æŒ‰é’® -->
  <view class="controls">
    <button class="control-btn" bindtap="runAllTests" disabled="{{isLoading}}">
      {{isLoading ? 'æµ‹è¯•è¿›è¡Œä¸­...' : 'ğŸš€ è¿è¡Œæ‰€æœ‰æµ‹è¯•'}}
    </button>
    <button class="control-btn secondary" bindtap="clearResults">
      ğŸ—‘ï¸ æ¸…é™¤æµ‹è¯•ç»“æœ
    </button>
  </view>

  <!-- å•ç‹¬æµ‹è¯•åˆ—è¡¨ -->
  <view class="test-list">
    <view class="test-item" tt:for="{{tests}}" tt:key="id">
      <view class="test-header">
        <view class="test-name">{{item.name}}</view>
        <button 
          class="test-btn" 
          bindtap="runTest" 
          data-test-id="{{item.id}}"
          disabled="{{isLoading || currentTest === item.id}}"
        >
          {{currentTest === item.id ? 'è¿è¡Œä¸­...' : 'æµ‹è¯•'}}
        </button>
      </view>
      <view class="test-description">{{item.description}}</view>
      <view class="test-config">
        Prompt: {{item.prompt}}
        Config: {{item.config}}
      </view>
    </view>
  </view>

  <!-- æµ‹è¯•ç»“æœ -->
  <view class="results-section" tt:if="{{testResults.length > 0}}">
    <view class="results-title">ğŸ“Š æµ‹è¯•ç»“æœ</view>
    
    <view class="result-item {{item.status}}" tt:for="{{testResults}}" tt:key="id" tt:for-index="index">
      <view class="result-header">
        <view class="result-name">{{item.name}}</view>
        <view class="result-status {{item.status}}">
          {{item.status === 'success' ? 'âœ… æˆåŠŸ' : 'âŒ å¤±è´¥'}}
        </view>
      </view>
      
      <view class="result-meta">
        <text>â±ï¸ {{item.duration}}ms</text>
        <text>ğŸ•’ {{item.timestamp}}</text>
        <button class="copy-btn" bindtap="copyResult" data-index="{{index}}">
          ğŸ“‹ å¤åˆ¶
        </button>
      </view>

      <!-- æˆåŠŸç»“æœ -->
      <view tt:if="{{item.status === 'success'}}">
        <view class="result-content">
          <view class="result-content-title">ğŸ“ å“åº”å†…å®¹:</view>
          <view class="result-content-text">{{item.response.content}}</view>
        </view>
        
        <view class="result-content" tt:if="{{item.response.usage}}">
          <view class="result-content-title">ğŸ“Š Tokenä½¿ç”¨:</view>
          <view class="result-content-text">{{item.response.usage}}</view>
        </view>
      </view>

      <!-- é”™è¯¯ç»“æœ -->
      <view tt:if="{{item.status === 'error'}}">
        <view class="result-content">
          <view class="result-content-title">âŒ é”™è¯¯ä¿¡æ¯:</view>
          <view class="result-content-text">{{item.error}}</view>
        </view>
      </view>

      <!-- è¯·æ±‚é…ç½® -->
      <view class="result-content">
        <view class="result-content-title">âš™ï¸ æµ‹è¯•é…ç½®:</view>
        <view class="result-content-text">Prompt: {{item.prompt}}
Config: {{item.config}}</view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" tt:if="{{testResults.length === 0}}">
    <view class="empty-icon">ğŸ”¬</view>
    <view class="empty-text">è¿˜æ²¡æœ‰æµ‹è¯•ç»“æœ
ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•GPT-5 API</view>
  </view>

  <!-- è¿”å›æŒ‰é’® -->
  <view style="margin-top: 60rpx; text-align: center;">
    <button class="control-btn" bindtap="goHome">
      ğŸ  è¿”å›ä¸»é¡µ
    </button>
  </view>
</view>
