<!-- ä¾§è¾¹æ ç»„ä»¶ -->
<view class="sidebar-container" tt:if="{{show}}">
  <!-- é®ç½©å±‚ -->
  <view class="mask {{animationClass}}" bindtap="handleMaskClick"></view>
  
  <!-- ä¾§è¾¹æ å†…å®¹ -->
  <view class="sidebar-content {{animationClass}}" catchtap="handleContentClick">
    <!-- æœªç™»å½•çŠ¶æ€ -->
    <view class="login-prompt" tt:if="{{!userInfo}}">
      <view class="login-icon">ğŸ‘¤</view>
      <text class="login-text">ç™»å½•åæŸ¥çœ‹æ›´å¤š</text>
      <button class="login-btn-small" bindtap="handleLogin">ç«‹å³ç™»å½•</button>
    </view>
    
    <!-- å·²ç™»å½•çŠ¶æ€ -->
    <view class="user-section" tt:else>
      <!-- ç”¨æˆ·ä¿¡æ¯ -->
      <view class="user-info">
        <view class="avatar-wrapper">
          <image 
            class="avatar" 
            src="{{userInfo.avatar || '/assets/images/default-avatar.png'}}" 
            mode="aspectFill"
          />
        </view>
        <view class="user-details">
          <text class="nickname">{{userInfo.nickname || 'å¯“è¨€ç”¨æˆ·'}}</text>
          <text class="phone" tt:if="{{userInfo.phone}}">{{userInfo.phone}}</text>
        </view>
      </view>
      
      <!-- å¯“è¨€å¸åŒºåŸŸ -->
      <view class="coin-section">
        <view class="coin-display">
          <text class="coin-label">å¯“è¨€å¸</text>
          <view class="coin-value-wrapper">
            <text class="coin-value">{{coinBalance}}</text>
            <text class="coin-unit">æš</text>
          </view>
        </view>
        
        <view class="coin-actions">
          <button class="action-btn primary" bindtap="handleRecharge">
            <text>å……å€¼</text>
            <text class="first-charge-tag" tt:if="{{isFirstCharge}}">é¦–å……+5</text>
          </button>
          <button class="action-btn secondary" open-type="share">é‚€è¯·å¥½å‹å¾—10å¸</button>
        </view>
      </view>
      
      <!-- æ¶ˆè´¹è®°å½• -->
      <view class="transactions-section">
        <view class="section-header">
          <text class="section-title">æ¶ˆè´¹è®°å½•</text>
        </view>
        
        <view class="transactions-list" tt:if="{{transactions.length > 0}}">
          <view 
            class="transaction-item" 
            tt:for="{{transactions}}" 
            tt:key="id"
          >
            <view class="trans-left">
              <text class="trans-icon">{{item.type === 'consume' ? 'ğŸ’«' : item.type === 'recharge' ? 'ğŸ’°' : item.type === 'initial' ? 'ğŸ' : item.type === 'first_bonus' ? 'ğŸŠ' : item.type === 'invite_reward' ? 'ğŸ‘¥' : 'ğŸ‰'}}</text>
              <view class="trans-info">
                <text class="trans-name">{{item.type_name}}</text>
                <text class="trans-time">{{item.created_at}}</text>
              </view>
            </view>
            <view class="trans-right">
              <text class="trans-amount {{item.amount > 0 ? 'positive' : 'negative'}}">
                {{item.amount > 0 ? '+' : ''}}{{item.amount}}
              </text>
            </view>
          </view>
        </view>
        
        <view class="empty-transactions" tt:else>
          <text class="empty-text">æš‚æ— æ¶ˆè´¹è®°å½•</text>
        </view>
      </view>
    </view>
    
    <!-- åº•éƒ¨ç‰ˆæœ¬ä¿¡æ¯ -->
    <view class="footer">
      <text class="version">è¡£ç´¢å¯“è¨€ v2.0</text>
    </view>
  </view>
</view>

